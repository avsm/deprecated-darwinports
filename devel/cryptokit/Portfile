# $Id: Portfile 20267 2006-11-01 01:45:51Z blair@macports.org $

PortSystem          1.0
name                cryptokit
version             1.3
categories          devel security
maintainers         anil@recoil.org
description         Objective Caml interface to cryptographic functions.
long_description    The Cryptokit library for Objective Caml provides a \
                    variety of cryptographic primitives that can be used to \
                    implement cryptographic protocols in security-sensitive \
                    applications.
homepage            http://pauillac.inria.fr/~xleroy/software.html
platforms           darwin
master_sites        http://caml.inria.fr/distrib/bazar-ocaml/
checksums           md5     d7de01d0702d16b3491c9e794ebb2cc3 \
                    sha1    aebb0b2ed7c89320006de63b73ab639051888a9c \
                    rmd160  bdf1ec365562b534b7995d0f2c3fc06ec203111f
depends_lib         bin:camlp4:ocaml
use_configure       no
build.target        all allopt

set instdir         ${destroot}${prefix}/lib/ocaml/site-lib
destroot.args       INSTALLDIR=${instdir}/cryptokit
patchfiles          patch-META
pre-destroot {
        file mkdir ${instdir}/cryptokit/stublibs
        file mkdir ${instdir}/stublibs
}
post-destroot {
        system "ranlib ${instdir}/cryptokit/cryptokit.a"
        system "ranlib ${instdir}/cryptokit/libcryptokit.a"
        xinstall META ${instdir}/cryptokit/META
        system "mv ${instdir}/cryptokit/stublibs/*.so ${instdir}/stublibs/"
}
