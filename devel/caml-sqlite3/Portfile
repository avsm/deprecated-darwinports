# $Id: Portfile 40948 2008-10-18 20:05:04Z ryandesign@macports.org $

PortSystem          1.0

name                caml-sqlite3
version             1.4.0
revision            1
categories          devel ml
maintainers         landonf openmaintainer
description         OCaml bindings for SQLite 3
long_description    ${description}

homepage            http://www.ocaml.info/home/ocaml_sources.html
platforms           darwin
master_sites        http://www.ocaml.info/ocaml_sources/

distname            ocaml-sqlite3-${version}

checksums           md5     257b7de04c29dccf9b70d911f89757ad \
                    sha1    10e161c3e5572d27d2abeaf65ed5497746d2654a \
                    rmd160  cfd9e16a57dd11d6e6854a00550f96a401a22f6b

depends_lib         port:ocaml \
                    port:caml-findlib \
                    port:sqlite3

patchfiles          patch-Makefile.in

configure.args      --with-sqlite3=${prefix}

pre-destroot {
    set ocaml_site_path [exec ocamlfind printconf destdir]
    file mkdir ${destroot}/${ocaml_site_path}
    file mkdir ${destroot}/${ocaml_site_path}/stublibs
}

post-destroot {
    xinstall -d -755 ${destroot}${prefix}/share/doc/${name}
    eval xinstall -m 644 [glob ${worksrcpath}/doc/*.html] \
        ${destroot}/${prefix}/share/doc/${name}
}

